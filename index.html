<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal Clicker</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
            }
        }
    </script>
    <script src="script.js" type="module"></script>
    <audio id="background-music" loop>
        <source src="/Wii-Shop-Background-Music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
</head>

<body>
    <nav id="top-menu">
        <div class="logo">Crystal Clicker</div>
        <div class="menu-icons">
            <button id="settings-btn" class="menu-icon">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                </svg>
            </button>
            <button id="credits-btn" class="menu-icon">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8 S16.41,20,12,20z M12.31,11.14c-1.77-0.45-2.34-0.94-2.34-1.67c0-0.84,0.79-1.43,2.1-1.43c1.38,0,1.9,0.66,1.94,1.64h1.71 c-0.05-1.34-0.87-2.57-2.49-2.97V5H10.9v1.69c-1.51,0.32-2.72,1.3-2.72,2.81c0,1.79,1.49,2.69,3.66,3.21 c1.95,0.46,2.34,1.15,2.34,1.87c0,0.53-0.39,1.39-2.1,1.39c-1.6,0-2.23-0.72-2.32-1.64H8.04c0.1,1.7,1.36,2.66,2.86,2.97V19h2.34 v-1.67c1.52-0.29,2.72-1.16,2.73-2.77C16.01,12.64,14.83,11.75,12.31,11.14z"/>
                </svg>
            </button>
        </div>
    </nav>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>Settings</h2>
            <div class="setting-item">
                <label for="volume-slider">Volume</label>
                <input type="range" id="volume-slider" min="0" max="100" value="30">
                <span id="volume-value">30%</span>
            </div>
            <div class="setting-item">
                <label for="brightness-slider">Brightness</label>
                <input type="range" id="brightness-slider" min="0" max="100" value="100">
                <span id="brightness-value">100%</span>
            </div>
            <button id="save-settings">Save Settings</button>
        </div>
    </div>

    <!-- Credits Modal -->
    <div id="credits-modal" class="modal">
        <div class="modal-content">
            <h2>Credits</h2>
            <div class="credits-item">
                <span>AstronomyF7M</span>
            </div>
            <div class="credits-item">
                <span>Skaberson</span>
            </div>
        </div>
    </div>

    <div id="loading-screen">
        <h1>Loading...</h1>
        <div class="loader"></div>
    </div>

    <div id="menu" style="display: none;">
        <h1>Crystal Clicker</h1>
        <button id="start-button">Start</button>
    </div>

    <div id="app" style="display: none;">
        <div id="game">
            <h1>Crystal Clicker</h1>
            <div id="crystal-container">
                <img id="crystal" src="New Piskel.png" alt="Crystal" width="100" height="100">
                <div id="crystal-count">Crystals: 0</div>
            </div>
            <div id="rebirth-container">
            </div>
        </div>
        <div id="shop">
            <h2>Shop</h2>
            <ul id="shop-items">
            </ul>
        </div>
    </div>

    <div id="hints">
        <div id="hint-1">Did you know mining always starts at the bottom?</div>
        <div id="hint-2">The deepest secrets are often hidden in plain sight</div>
        <div id="hint-3">Some treasures don't shine until you find them</div>
    </div>

    <script>
        // Initialize audio element
        document.addEventListener('DOMContentLoaded', () => {
            const backgroundMusic = document.getElementById('background-music');
            backgroundMusic.volume = 0.3; 
            backgroundMusic.loop = true; 
            
            // Add event listener to restart playback if it stops
            backgroundMusic.addEventListener('ended', () => {
                backgroundMusic.play().catch(error => {
                    console.log('Autoplay was prevented. User interaction required to start music.');
                });
            });

            backgroundMusic.play().catch(error => {
                console.log('Autoplay was prevented. User interaction required to start music.');
            });
        });
    </script>
</body>

</html>
